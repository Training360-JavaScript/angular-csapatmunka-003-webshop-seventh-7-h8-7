<div class="row">
  <div *ngIf="product$ | async as product" class="form-container col-8 offset-2">
    <form #productForm="ngForm" class="mt-4">

    <input [(ngModel)]="product.id" name="id" type="hidden">

    <div class="form-group">
      <label for="productName"> Cím </label>
      <input [(ngModel)]="product.name"
        class="form-control"
        name="name"
        id="productName"
        type="text"
        required>
      <div class="error-message"
        [hidden]="productForm.controls['name']?.valid">
        A könyv címének kitöltése kötelező.
      </div>
    </div>

    <div class="form-group">
      <label for="productAuthor"> Szerző </label>
      <input [(ngModel)]="product.author"
        class="form-control"
        name="author"
        id="productAuthor"
        type="text"
        required>
      <div class="error-message"
        [hidden]="productForm.controls['author']?.valid">
       A szerző megadása kötelező.
      </div>
    </div>

    <div class="form-group">
      <label for="productDescription"> Leírás </label>
      <textarea [(ngModel)]="product.description"
        rows="6"
        class="form-control"
        name="description"
        id="productDescription"> </textarea>
    </div>

    <div class="form-group">
      <label for="productCat"> Kategória </label>
      <input [(ngModel)]="product.catId"
        class="form-control"
        name="catId"
        id="productCat"
        type="text"
        required>
      <div class="error-message"
        [hidden]="productForm.controls['catId']?.valid">
        A kategória mező kitöltése kötelező.
      </div>
    </div>

    <div class="form-group">
      <label for="productPrice"> Ár </label>
      <input [(ngModel)]="product.price"
        class="form-control"
        name="price"
        id="productPrice"
        type="number"
        required>
      <div class="error-message"
        [hidden]="productForm.controls['price']?.valid">
        Meg kell adnia a termék árát.
      </div>
    </div>

    <div class="form-group">
      <label for="productStock"> Készlet </label>
      <input [(ngModel)]="product.stock"
        class="form-control"
        name="stock"
        id="productStock"
        type="number"
        required>
      <div class="error-message"
        [hidden]="productForm.controls['stock']?.valid">
        Meg kell adnia a darabszámot.
      </div>
    </div>

    <div class="form-group">
      <label for="productCover"> A borító elérési útvonala </label>
      <input [(ngModel)]="product.image"
        class="form-control"
        name="cover"
        id="productCover"
        type="text">
    </div>

    <div class="form-group">
      <label for="productFeatured"> Kiemelt </label>
      <input [(ngModel)]="product.featured"
        class="form-control"
        name="featured"
        id="productStock"
        type="text"
        required>
      <div class="error-message"
        [hidden]="productForm.controls['featured']?.valid">
        A mező kitöltése kötelező.
      </div>
    </div>

    <div class="form-group">
      <label for="productStock"> Elérhető </label>
      <input [(ngModel)]="product.active"
        class="form-control"
        name="active"
        id="productActive"
        type="text"
        required>
      <div class="error-message"
        [hidden]="productForm.controls['active']?.valid">
        A mező kitöltése kötelező
      </div>
    </div>

    <div class="button-group d-flex justify-content-center mb-5 p-1">
    <button
      [disabled]="productForm.invalid"
      type="submit"
      (click)="onUpdate(productForm.value)"
      class="btn btn-primary btn-lg">
        <i class="fa fa-save"></i>
    </button>
    <button class="btn btn-danger btn-lg"
      type="button"
      data-toggle="modal"
      data-target="#deleteModalCenter">
        <i class="fa fa-trash"></i>
    </button>
    <button [routerLink]="['/', 'admin']" class="btn btn-dark btn-lg">
      <i class="fa fa-undo"></i>
    </button>
  </div>


  <!-- Modal -->
<div class="modal fade" id="deleteModalCenter" tabindex="-1" role="dialog" aria-labelledby="deleteModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="deleteModalLongTitle">Biztos benne, hogy törli ezt a terméket?</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
       A törlés gombra kattintva a könyv adatai véglegesen törlődnek a nyilvántartásból!
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Bezárás</button>
        <button type="button" class="btn btn-danger" (click)="onClickDelete(productForm.value)">Törlés</button>
      </div>
    </div>
  </div>
</div>

    </form>
  </div>
</div>
